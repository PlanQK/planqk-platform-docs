(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{350:function(e,t,a){"use strict";a.r(t);var s=a(7),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"custom-docker-containers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#custom-docker-containers"}},[e._v("#")]),e._v(" Custom Docker Containers")]),e._v(" "),t("p",[e._v('We support custom Docker containers to run your service.\nYou may consider using "Docker" as your service runtime in the following scenarios:')]),e._v(" "),t("ul",[t("li",[e._v("You need OS-level packages not included in the Python Template. With Docker, you have complete control over your base operating system and installed packages.")]),e._v(" "),t("li",[e._v("Your application is in a language not yet supported by PlanQK, like Go or Rust.")]),e._v(" "),t("li",[e._v("You need guaranteed reproducible builds. We release regular updates to our coding templates to improve functionality, security, and performance. While we aim for full backward compatibility, using a Dockerfile is the best way to ensure that your production runtime is always in sync with your local builds.")])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("Be compliant with our runtime interface")]),e._v(" "),t("p",[e._v("You cannot run an arbitrary Docker container. You must comply with our "),t("RouterLink",{attrs:{to:"/managed-services/managed-services-runtime-interface.html#custom-docker-container"}},[e._v("runtime interface")]),e._v(".")],1)]),e._v(" "),t("h2",{attrs:{id:"set-up-a-custom-docker-container-project"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-up-a-custom-docker-container-project"}},[e._v("#")]),e._v(" Set up a Custom Docker Container Project")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Project Templates")]),e._v(" "),t("p",[e._v("Examples for custom Docker container projects can be found in the "),t("a",{attrs:{href:"https://github.com/PlanQK/planqk-platform-samples/tree/master/coding-templates/docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("PlanQK Platform Samples"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("p",[e._v("The starting folder structure of the project could look like this:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(".\n├── Dockerfile\n├── openapi-spec.yml\n├── input\n│   └── ...\n└── src\n    └── ...\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Use the PlanQK CLI")]),e._v(" "),t("p",[e._v("You may use the "),t("RouterLink",{attrs:{to:"/quickstart.html#installation"}},[e._v("PlanQK CLI")]),e._v(" to create a new custom Docker container project.\nJust select a suitable starter project when running "),t("code",[e._v("planqk init")]),e._v(".")],1)]),e._v(" "),t("p",[e._v("It is important that there is a file called "),t("code",[e._v("Dockerfile")]),e._v(" in the root directory of the project.\nThe "),t("code",[e._v("Dockerfile")]),e._v(" is the file that defines the Docker image that will be built.\nAnd optionally, there is a file called "),t("code",[e._v("openapi-spec.yml")]),e._v(" in the root directory of the project.\nThe "),t("code",[e._v("openapi-spec.yml")]),e._v(" is the file that defines the API of the service ("),t("RouterLink",{attrs:{to:"/managed-services/managed-services-api-spec.html"}},[e._v("more information")]),e._v(").\nThe "),t("code",[e._v("input")]),e._v(" folder may contain the input data and parameters to test your application locally.\nThe "),t("code",[e._v("src")]),e._v(" folder contains any source code required to run your application.\nYou may extend this structure depending on your needs.")],1),e._v(" "),t("p",[e._v("To test your application and run it application using Docker, make sure you have Docker installed on your system, navigate to the root directory of the project, and run the following commands:")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" your-app "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PROJECT_ROOT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PROJECT_ROOT")]),e._v("/input:/var/input your-app\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Windows Users")]),e._v(" "),t("p",[e._v("For GitBash users on Windows, replace")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PROJECT_ROOT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("with")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PROJECT_ROOT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("For Windows command-prompt users, you can use the following command:")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" %cd%/input:/var/input your-app\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("p",[e._v("This assumes that you have an input data file "),t("code",[e._v("data.json")]),e._v(" and an optional parameters file "),t("code",[e._v("params.json")]),e._v(" in "),t("code",[e._v("./input")]),e._v(".\nThe "),t("code",[e._v("-v")]),e._v(" option is used to mount this directory as volumes in the Docker container.\nThe application may read the input from "),t("code",[e._v("/var/input/data.json")]),e._v(" and parameters from "),t("code",[e._v("/var/input/params.json")]),e._v(" respectively.\nThe Docker container runs the application and returns the result as output, printed to stdout and prefixed by "),t("code",[e._v("PlanQK:Job:Result:")]),e._v(".")]),e._v(" "),t("p",[e._v("For more information on how to deal with input and output data, see our runtime interface documentation for "),t("RouterLink",{attrs:{to:"/managed-services/managed-services-runtime-interface.html#custom-docker-container"}},[e._v("custom Docker containers")]),e._v(".")],1),e._v(" "),t("h2",{attrs:{id:"what-s-next"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-s-next"}},[e._v("#")]),e._v(" What's next?")]),e._v(" "),t("ul",[t("li",[e._v("Learn how to create an "),t("RouterLink",{attrs:{to:"/managed-services/managed-services-api-spec.html"}},[e._v("API specification")]),e._v(" for your service.")],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/managed-services/introduction.html#create-a-managed-service"}},[e._v("Deploy your service")]),e._v(" using our CLI or web application.")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);