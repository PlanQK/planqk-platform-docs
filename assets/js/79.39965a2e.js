(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{376:function(e,a,t){"use strict";t.r(a);var s=t(7),n=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"using-a-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-a-service"}},[e._v("#")]),e._v(" Using a Service")]),e._v(" "),a("p",[e._v("You can use any PlanQK Service and its underlying HTTP API by subscribing to it with a PlanQK Application.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("Examples showing how to work with PlanQK Services (e.g., via Jupyter notebooks) can be found in "),a("a",{attrs:{href:"https://github.com/PlanQK/planqk-platform-samples",target:"_blank",rel:"noopener noreferrer"}},[e._v("this"),a("OutboundLink")],1),e._v(" repository.")])]),e._v(" "),a("p",[e._v("There are two ways to subscribe to a service.\nOne is to subscribe to an internally published service, the other is to subscribe to a service that has been published on the marketplace.")]),e._v(" "),a("h2",{attrs:{id:"subscribe-to-an-internally-published-planqk-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subscribe-to-an-internally-published-planqk-service"}},[e._v("#")]),e._v(" Subscribe to an Internally Published PlanQK Service")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Navigate to the details page of your service.")]),e._v(" "),a("img",{attrs:{width:"768",src:e.$withBase("/images/service-overview.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v('Click on the "Publish Internal" button.')]),e._v(" "),a("img",{attrs:{width:"768",src:e.$withBase("/images/service-details-page.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Navigate to the details page of your application.")]),e._v(" "),a("img",{attrs:{width:"768",src:e.$withBase("/images/application-overview.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v('Press the "Subscribe to Service" button.')])]),e._v(" "),a("li",[a("p",[e._v("A dialog box appears in which you have to select the published service.")]),e._v(" "),a("img",{attrs:{width:"500",src:e.$withBase("/images/internal-service-subscription.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v('After you have selected the correct service, click on the "Subscribe" button in the dialog box.')])])]),e._v(" "),a("h2",{attrs:{id:"subscribe-to-a-planqk-service-published-on-the-planqk-marketplace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subscribe-to-a-planqk-service-published-on-the-planqk-marketplace"}},[e._v("#")]),e._v(" Subscribe to a PlanQK Service Published on the PlanQK Marketplace")]),e._v(" "),a("ol",[a("li",[a("p",[e._v('Click on "Marketplace" on the top navigation.')]),e._v(" "),a("img",{attrs:{width:"768",src:e.$withBase("/images/navigation-bar.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v('Select "Services" from the left navigation menu.')]),e._v(" "),a("img",{attrs:{height:"300",src:e.$withBase("/images/marketplace-service-overview.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Select a service you want to subscribe to and navigate to its details page.")])]),e._v(" "),a("li",[a("p",[e._v('Select the pricing plan that suits you and click on the "Subscribe" button of the respective pricing plan. A dialog box will show up.')]),e._v(" "),a("img",{attrs:{width:"768",src:e.$withBase("/images/select-pricing-plan.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v('Finally, select your application and press the "Subscribe" button.')]),e._v(" "),a("img",{attrs:{width:"500",src:e.$withBase("/images/application-selection.png"),alt:""}})])]),e._v(" "),a("h2",{attrs:{id:"execute-a-subscribed-planqk-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#execute-a-subscribed-planqk-service"}},[e._v("#")]),e._v(" Execute a Subscribed PlanQK Service")]),e._v(" "),a("p",[e._v("To execute a service, you need to provide the following information:")]),e._v(" "),a("ol",[a("li",[a("strong",[e._v("Service Endpoint URL")]),e._v(":\nCan be obtained from the subscriptions section of your application that subscribed to the service")]),e._v(" "),a("li",[a("strong",[e._v("Authorization Bearer Token")]),e._v(":\nCan be obtained from platform's token endpoint as described in the previous section")]),e._v(" "),a("li",[a("strong",[e._v("Header Fields")]),e._v(":\n"),a("code",[e._v("Content-Type")]),e._v(" and  "),a("code",[e._v("Accept")]),e._v(" are both set to "),a("code",[e._v("application/json")])]),e._v(" "),a("li",[a("strong",[e._v("Input Data")]),e._v(":\nEither passed as "),a("a",{attrs:{href:"#provide-input-data"}},[e._v("value or as data pool reference")])]),e._v(" "),a("li",[a("strong",[e._v("Parameters")]),e._v(":\nEither passed as "),a("a",{attrs:{href:"#provide-input-parameters"}},[e._v("value or as data pool reference")])])]),e._v(" "),a("p",[e._v("The following examples shows the cURL command and how to start a service execution:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("curl -X 'POST' \\\n  'https://gateway.am.platform.planqk.de/70b6e720-dcec-4b9b-a462-a6fdaf400bfa/myservice/1.0.0/' \\\n  -H 'Accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer eyJ4NXQiOiJNell4TW1Ga09HWXdNV0kwWldObU5EY3hOR1l3WW1NNFpUQTNNV0kyTkRBelpHUXp...' \\\n  -d '{\n    \"data\": {\n      \"values\": [\n        100,\n        50,\n      ]\n    },\n    \"params\": {\n      \"round_off\": false\n    }\n  }'\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br")])]),a("p",[e._v("For each call, a new service execution is created.\nThe id of the service execution and its initial execution state is returned by the POST request.\nThe POST above returns for instance the following result:")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"02e0d85a-5a95-4abe-a642-1ee9a94fdf14"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"PENDING"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"createdAt"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2022-09-19 16:45:24"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("The execution id can be used to query the state and the result of a service execution.")]),e._v(" "),a("h2",{attrs:{id:"retrieve-execution-result"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#retrieve-execution-result"}},[e._v("#")]),e._v(" Retrieve Execution Result")]),e._v(" "),a("p",[e._v("Since a service execution is performed asynchronously, you need to query its state to know if its execution completed.\nAfter a service was completed you can retrieve the result.\nTherefore, a PlanQK Service provides dedicated endpoints to query the state of each of its executions.")]),e._v(" "),a("p",[e._v("The state can be retrieved by calling the endpoint "),a("code",[e._v("GET /{id}")]),e._v(".\nThe state of our example service execution with id "),a("code",[e._v("02e0d85a-5a95-4abe-a642-1ee9a94fdf14")]),e._v(" can be for instance retrieved with the following request:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("curl -X 'GET' \\\n  'https://gateway.am.platform.planqk.de/70b6e720-dcec-4b9b-a462-a6fdaf400bfa/myservice/1.0.0/02e0d85a-5a95-4abe-a642-1ee9a94fdf14' \\\n  -H 'Accept: application/json' \\\n  -H 'Authorization: Bearer ...'\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("If the execution is still running, you should get "),a("code",[e._v('"status": "RUNNING"')]),e._v(" or "),a("code",[e._v('"status": "PENDING"')]),e._v(".\nWhen the execution finished successfully, you should see "),a("code",[e._v('"status": "SUCCEEDED"')]),e._v(".\nIf you get either "),a("code",[e._v('"status": "FAILED"')]),e._v(" or "),a("code",[e._v('"status": "UNKNOWN"')]),e._v(" something went wrong.")]),e._v(" "),a("p",[e._v("You can retrieve the result or the cause of an error through the endpoint "),a("code",[e._v("GET /{id}/result")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("curl -X 'GET' \\\n  'https://gateway.am.platform.planqk.de/70b6e720-dcec-4b9b-a462-a6fdaf400bfa/myservice/1.0.0/02e0d85a-5a95-4abe-a642-1ee9a94fdf14/result' \\\n  -H 'Accept: application/json' \\\n  -H 'Authorization: Bearer ...'\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("If the service execution succeeded, the response contains the "),a("code",[e._v('"result"')]),e._v(" property containing the response as JSON object plus an optional metadata field:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{"metadata":null,"result":{"sum":420.69}}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("In case of an error the message may contain an error "),a("code",[e._v('"code"')]),e._v(" and an error "),a("code",[e._v('"detail"')]),e._v(" property, for example:")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"CONNECTION_ERROR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"detail"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Backend host could not be found."')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h2",{attrs:{id:"provide-input-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provide-input-data"}},[e._v("#")]),e._v(" Provide Input Data")]),e._v(" "),a("p",[e._v("Input data being processed by the service can be either passed as "),a("strong",[e._v("value")]),e._v(" or as\n"),a("strong",[a("RouterLink",{attrs:{to:"/community-platform/data-pools.html"}},[e._v("data pool")])],1),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),a("p",[e._v("Currently, only JSON is supported as service input.\nBinary and stream data support will be added in the future.")])]),e._v(" "),a("p",[e._v("To pass input data as value, provide the "),a("code",[e._v('"data"')]),e._v(" object as payload of the POST request as shown in the example above."),a("br"),e._v("\nYou can pass as value for the "),a("code",[e._v('"data"')]),e._v(" object an arbitrary key-value JSON map:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "key1": val1,\n  "key2": val2,\n  ...\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("Input data passed by value are limited to a maximum size of 1MB.\nTo pass larger data sets to a service, you can use data pools instead.\nThis also enables you to easily reuse data provided by other platform users.")]),e._v(" "),a("p",[e._v("To pass the content of a data pool as input, specify the keyword "),a("code",[e._v('"dataRef"')]),e._v(" instead of "),a("code",[e._v('"data"')]),e._v(" followed by a colon and a JSON object referencing the file within the data pool.\nTherefore, the object specifies the id of the data pool "),a("code",[e._v('"dataPoolId"')]),e._v(", the id of the data source descriptor "),a("code",[e._v('"dataSourceDescriptorId"')]),e._v(" and the id of the actual file "),a("code",[e._v('"fileId"')]),e._v(".")]),e._v(" "),a("p",[e._v("Here the call of our example service with a data pool reference is shown:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('curl -X \'POST\' \\\n  \'https://gateway.am.platform.planqk.de/70b6e720-dcec-4b9b-a462-a6fdaf400bfa/myservice/1.0.0/\' \\\n  ...\n  -d \'{\n    "dataRef": {\n      "dataPoolId": "2a7d74a6-0bb5-400a-8a0c-7125aef5613e",\n      "dataSourceDescriptorId": "040cdf8f-a2c8-449d-a534-498c597b124c",\n      "fileId": "c52e7fa2-d971-4249-b4b4-aecedf8e3068"\n    },\n    "params": {...}\n  }\'\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("p",[e._v("To obtain the data pool file reference object perform the following steps:")]),e._v(" "),a("ol",[a("li",[e._v("Go to your data pool in the "),a("a",{attrs:{href:"https://platform.planqk.de/datapools",target:"_blank",rel:"noopener noreferrer"}},[e._v("data pool"),a("OutboundLink")],1),e._v(" section.")]),e._v(" "),a("li",[e._v('Click the "Copy Text" button of the respective file to copy the file reference object to your clipboard.')])]),e._v(" "),a("h2",{attrs:{id:"provide-input-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provide-input-parameters"}},[e._v("#")]),e._v(" Provide Input Parameters")]),e._v(" "),a("p",[e._v("Input parameters provide additional (meta-)information for the execution such as the number of shots, the number of variational layers for a circuit or the name of the backend.\nLike input data, they can be either provided as value or as data pool.")]),e._v(" "),a("p",[e._v("To provide them as value use the "),a("code",[e._v('"params"')]),e._v(" key with an arbitrary key-value JSON map as value as shown in the example at the beginning of this section.")]),e._v(" "),a("p",[e._v("Use the key "),a("code",[e._v('"paramsRef"')]),e._v(" to reference the parameter value data pool content.\nThis you can reuse your parameter settings for different service executions.")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('curl -X \'POST\' \\\n  \'https://gateway.am.platform.planqk.de/70b6e720-dcec-4b9b-a462-a6fdaf400bfa/myservice/1.0.0/\' \\\n  ...\n  -d \'{\n    "data": {...},\n    "paramsRef": {\n      "dataPoolId": "e06c3254-34d1-11ed-a261-0242ac120002",\n      "dataSourceDescriptorId": "040cdf8f-a2c8-449d-a534-498c597b124c",\n      "fileId": "c52e7fa2-d971-4249-b4b4-aecedf8e3068"\n    }\n  }\'\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("h2",{attrs:{id:"using-generated-api-clients"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-generated-api-clients"}},[e._v("#")]),e._v(" Using Generated API Clients")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("This section still needs to be revised.\nIf you have any questions, please contact support@planqk.de by email.")])]),e._v(" "),a("p",[e._v("You can interact with a PlanQK Service through HTTP (see above) or using a generated API client for Java, Python, or JavaScript.\nYou can download the clients from the respective service details page in the "),a("a",{attrs:{href:"https://platform.planqk.de/marketplace/apis",target:"_blank",rel:"noopener noreferrer"}},[e._v("PlanQK Marketplace"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Once you download the client, extract and integrate it into your project.")])])}),[],!1,null,null,null);a.default=n.exports}}]);